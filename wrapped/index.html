<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>HomeScope Wrapped 2025</title>
    <meta name="theme-color" content="#05060a" />
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap");

      :root {
        --bg: #05060a;
        --bg-2: #0c0f16;
        --fg: #f6f8fc;
        --muted: rgba(246, 248, 252, 0.82);
        --muter: rgba(246, 248, 252, 0.64);
        --stroke: rgba(246, 248, 252, 0.12);
        --glass: rgba(255, 255, 255, 0.06);
        --accent: #6df5d8;
        --accent-2: #8dd7ff;
        --shadow: 0 20px 70px rgba(0, 0, 0, 0.65);
        --safe-top: env(safe-area-inset-top, 0px);
        --safe-bot: env(safe-area-inset-bottom, 0px);
      }

      * { box-sizing: border-box; }
      html, body { height: 100%; }
      body {
        margin: 0;
        background:
          radial-gradient(140% 120% at 20% 18%, rgba(109, 245, 216, 0.12), transparent 60%),
          radial-gradient(120% 100% at 80% 12%, rgba(141, 215, 255, 0.12), transparent 60%),
          linear-gradient(145deg, #05060a 0%, #0c0f16 65%, #070912 100%);
        color: var(--fg);
        font-family: "Space Grotesk", "Inter", system-ui, -apple-system, "Segoe UI", sans-serif;
        min-height: 100vh;
        padding-top: var(--safe-top);
        padding-bottom: var(--safe-bot);
        display: grid;
        place-items: center;
      }

      .app {
        width: 100%;
        max-width: 1240px;
        padding: 18px 16px 24px;
        display: flex;
        flex-direction: column;
        gap: 16px;
      }

      /* Top bar */
      .topbar {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        padding: 12px 14px;
        background: rgba(255, 255, 255, 0.04);
        border: 1px solid var(--stroke);
        border-radius: 16px;
        backdrop-filter: blur(16px);
        box-shadow: var(--shadow);
      }
      .brand {
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .dot {
        width: 12px; height: 12px;
        border-radius: 999px;
        background: var(--accent);
        box-shadow: 0 0 20px rgba(109, 245, 216, 0.7);
      }
      .brand-title {
        font-weight: 800;
        letter-spacing: 0.2px;
        line-height: 1.1;
        font-size: 14px;
      }
      .brand-subtitle {
        font-size: 12px;
        color: var(--muter);
        margin-top: 2px;
      }

      .controls {
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .link-out {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        border-radius: 999px;
        padding: 10px 14px;
        border: 1px solid rgba(109, 245, 216, 0.35);
        background: linear-gradient(135deg, rgba(109, 245, 216, 0.2), rgba(141, 215, 255, 0.18));
        color: var(--fg);
        font-weight: 800;
        letter-spacing: 0.1px;
        text-decoration: none;
        box-shadow: 0 10px 38px rgba(109, 245, 216, 0.22);
        transition: transform 160ms ease, box-shadow 160ms ease, border-color 160ms ease, opacity 160ms ease;
      }
      .link-out:hover,
      .link-out:focus-visible {
        transform: translateY(-1px);
        border-color: rgba(109, 245, 216, 0.6);
        box-shadow: 0 12px 46px rgba(141, 215, 255, 0.3);
        outline: none;
      }
      .toggle {
        border: 1px solid var(--stroke);
        background: var(--glass);
        color: var(--fg);
        padding: 10px 12px;
        border-radius: 999px;
        font-weight: 800;
        letter-spacing: 0.2px;
        cursor: pointer;
        backdrop-filter: blur(14px);
        box-shadow: var(--shadow);
        transition: transform 160ms ease, box-shadow 160ms ease, border-color 160ms ease, background 160ms ease;
      }
      .toggle[aria-pressed="true"] {
        background: linear-gradient(135deg, rgba(109, 245, 216, 0.95), rgba(141, 215, 255, 0.92));
        color: #041a12;
        border-color: rgba(109, 245, 216, 0.45);
        box-shadow: 0 12px 44px rgba(109, 245, 216, 0.36);
      }
      .toggle:hover,
      .toggle:focus-visible {
        transform: translateY(-1px);
        border-color: rgba(141, 215, 255, 0.35);
        box-shadow: 0 12px 44px rgba(0, 0, 0, 0.55);
        outline: none;
      }

      /* Centered player */
      .layout {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 16px;
        padding: 6px 0 0;
      }

      .player {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 14px;
      }

      /* Progress */
      .progress {
        width: 100%;
        max-width: 460px;
      }
      .progress-track {
        display: grid;
        grid-auto-flow: column;
        gap: 6px;
      }
      .segment {
        height: 4px;
        border-radius: 999px;
        background: rgba(255, 255, 255, 0.14);
        overflow: hidden;
      }
      .segment > span {
        display: block;
        height: 100%;
        width: 0%;
        background: rgba(255, 255, 255, 0.95);
        border-radius: 999px;
        transition: width 180ms linear;
      }

      /* Device */
      .device-shell {
        position: relative;
        width: min(96vw, 440px);
        aspect-ratio: 9 / 16;
        display: grid;
        place-items: center;
      }
      .device-glow {
        position: absolute;
        inset: 0;
        border-radius: 28px;
        background: radial-gradient(90% 90% at 50% 20%, rgba(109, 245, 216, 0.18), transparent 60%),
          radial-gradient(120% 120% at 50% 120%, rgba(141, 215, 255, 0.18), transparent 50%);
        filter: blur(32px);
        opacity: 0.9;
        z-index: 0;
      }
      .device-frame {
        position: relative;
        width: 100%;
        height: 100%;
        border-radius: 28px;
        padding: 8px;
        background: linear-gradient(160deg, rgba(255,255,255,0.12), rgba(255,255,255,0.02));
        border: 1px solid rgba(255, 255, 255, 0.12);
        box-shadow: 0 18px 70px rgba(0,0,0,0.65);
        z-index: 1;
      }

      /* Stage and deck */
      .stage {
        position: relative;
        width: 100%;
        height: 100%;
        border-radius: 22px;
        overflow: hidden;
        outline: none;
      }
      .deck {
        position: relative;
        width: 100%;
        height: 100%;
        border-radius: 20px;
        overflow: hidden;
        border: 1px solid var(--stroke);
        background: #0c0f14;
      }

      .slide {
        position: absolute;
        inset: 0;
        opacity: 0;
        transform: translateX(16px) scale(0.995);
        transition: opacity 320ms ease, transform 320ms ease;
        background-size: cover;
        background-position: center;
        filter: saturate(1.02) contrast(1.02);
      }
      .slide.active {
        opacity: 1;
        transform: translateX(0px) scale(1);
        box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.02);
      }

      .deck::after {
        content: "";
        position: absolute;
        inset: 0;
        pointer-events: none;
        opacity: 0.10;
        mix-blend-mode: overlay;
        background-image:
          radial-gradient(circle at 15% 25%, rgba(255,255,255,0.55) 0 1px, transparent 1px),
          radial-gradient(circle at 70% 35%, rgba(255,255,255,0.35) 0 1px, transparent 1px),
          radial-gradient(circle at 30% 80%, rgba(255,255,255,0.35) 0 1px, transparent 1px),
          repeating-linear-gradient(135deg, rgba(255,255,255,0.18) 0px, rgba(255,255,255,0.18) 1px, transparent 1px, transparent 10px);
        background-size: 140px 140px, 180px 180px, 160px 160px, auto;
      }

      .hint {
        display: grid;
        place-items: center;
        pointer-events: none;
        width: 100%;
      }
      .pill {
        font-size: 12px;
        color: rgba(255,255,255,0.78);
        padding: 10px 12px;
        border-radius: 999px;
        border: 1px solid var(--stroke);
        background: var(--glass);
        backdrop-filter: blur(14px);
      }

      @media (prefers-reduced-motion: reduce) {
        .slide, .segment > span {
          transition: none !important;
        }
      }

      @media (max-width: 720px) {
        .topbar {
          flex-direction: column;
          align-items: flex-start;
        }
        .controls {
          width: 100%;
          justify-content: space-between;
        }
        .device-shell {
          width: min(100%, 420px);
        }
      }
    </style>
  </head>

  <body>
    <main class="app" aria-label="HomeScope Wrapped 2025">
      <header class="topbar">
        <div class="brand">
          <div class="dot" aria-hidden="true"></div>
          <div class="brand-text">
            <div class="brand-title">HomeScope Wrapped</div>
            <div class="brand-subtitle">2025</div>
          </div>
        </div>
        <div class="controls">
          <a
            class="link-out"
            href="https://physicianeershaik.github.io/HomeScope/"
            target="_blank"
            rel="noreferrer"
            aria-label="Open the HomeScope website in a new tab"
            >Visit HomeScope</a
          >
          <button class="toggle" id="autoToggle" type="button" aria-pressed="true">
            Auto: On
          </button>
        </div>
      </header>

      <div class="layout">
        <section class="player">
          <div class="progress" aria-hidden="true">
            <div class="progress-track" id="progressTrack"></div>
          </div>

          <div class="device-shell">
            <div class="device-glow"></div>
            <div class="device-frame" id="deviceFrame">
              <section class="stage" id="stage" tabindex="0" aria-label="Wrapped slides">
                <!-- Slides injected by JS -->
              </section>
            </div>
          </div>

          <footer class="hint" aria-hidden="true">
            <div class="pill">Tap to continue • Swipe left/right</div>
          </footer>
        </section>
      </div>
    </main>

    <script>
      // HomeScope Wrapped — static story player (tap/swipe + Auto toggle)

      const SLIDES = [
        { src: "./assets/01-hero.png", alt: "HomeScope Wrapped 2025" },
        { src: "./assets/02-tap.png", alt: "Tap to view" },
        { src: "./assets/03-stickers.png", alt: "Hashtag stickers" },
        { src: "./assets/04-cities.png", alt: "Cities: Las Vegas, Houston, Dallas" },
        { src: "./assets/05-63.png", alt: "63% statistic" },
        { src: "./assets/06-stats.png", alt: "6 conferences, 4 cities, 2 years, 1 mission" },
        { src: "./assets/07-thanks.png", alt: "Thanks slide" },
        { src: "./assets/08-outro.png", alt: "Outro slide" },
      ];

      const AUTO_MS = 4200; // story timing
      const HOLD_PAUSE_MS = 140; // small delay to detect hold intent

      const stage = document.getElementById("stage");
      const progressTrack = document.getElementById("progressTrack");
      const autoToggle = document.getElementById("autoToggle");

      let index = 0;
      let autoOn = true;
      let autoTimer = null;
      let holdTimer = null;
      let isHolding = false;
      let deckEl = null;
      let slideEls = [];

      function clamp(n, a, b) {
        return Math.max(a, Math.min(b, n));
      }

      function build() {
        // Deck
        deckEl = document.createElement("div");
        deckEl.className = "deck";
        deckEl.setAttribute("role", "group");
        deckEl.setAttribute("aria-roledescription", "carousel");
        deckEl.setAttribute("aria-label", "HomeScope Wrapped slides");
        stage.appendChild(deckEl);

        // Slides (stacked)
        slideEls = SLIDES.map((s, i) => {
          const d = document.createElement("div");
          d.className = "slide" + (i === 0 ? " active" : "");
          d.style.backgroundImage = `url('${s.src}')`;
          d.setAttribute("aria-hidden", i === 0 ? "false" : "true");
          d.setAttribute("data-index", String(i));
          d.title = s.alt;
          deckEl.appendChild(d);
          return d;
        });

        // Progress segments
        progressTrack.style.gridTemplateColumns = `repeat(${SLIDES.length}, 1fr)`;
        progressTrack.innerHTML = "";
        for (let i = 0; i < SLIDES.length; i++) {
          const seg = document.createElement("div");
          seg.className = "segment";
          const fill = document.createElement("span");
          seg.appendChild(fill);
          progressTrack.appendChild(seg);
        }

        // Preload images so transitions are smooth
        SLIDES.forEach((s) => {
          const img = new Image();
          img.src = s.src;
        });

        attachEvents();
        setAuto(true);
      }

      function render() {
        // Update slides
        slideEls.forEach((el, i) => {
          const active = i === index;
          el.classList.toggle("active", active);
          el.setAttribute("aria-hidden", active ? "false" : "true");
        });

        // Update progress: previous full, current animated when auto on
        const segments = Array.from(progressTrack.querySelectorAll(".segment > span"));
        segments.forEach((fill, i) => {
          if (i < index) fill.style.width = "100%";
          else if (i > index) fill.style.width = "0%";
          else fill.style.width = autoOn ? "0%" : "100%";
        });

        if (autoOn) animateCurrentProgress();
      }

      function animateCurrentProgress() {
        const fills = Array.from(progressTrack.querySelectorAll(".segment > span"));
        const fill = fills[index];
        if (!fill) return;

        const start = performance.now();
        const duration = AUTO_MS;

        function tick(now) {
          if (!autoOn || isHolding) return;
          const t = clamp((now - start) / duration, 0, 1);
          fill.style.width = `${Math.round(t * 100)}%`;
          if (t < 1) requestAnimationFrame(tick);
        }
        requestAnimationFrame(tick);
      }

      function go(next) {
        const prev = index;
        index = clamp(next, 0, SLIDES.length - 1);
        if (index === prev) return;

        stopAutoTimer();
        render();
        if (autoOn) startAutoTimer();
      }

      function next() {
        if (index >= SLIDES.length - 1) {
          go(0);
        } else {
          go(index + 1);
        }
      }
      function prev() {
        if (index <= 0) {
          go(0);
        } else {
          go(index - 1);
        }
      }

      function setAuto(on) {
        autoOn = !!on;
        autoToggle.setAttribute("aria-pressed", autoOn ? "true" : "false");
        autoToggle.textContent = autoOn ? "Auto: On" : "Auto: Off";

        stopAutoTimer();
        render();
        if (autoOn) startAutoTimer();
      }

      function startAutoTimer() {
        stopAutoTimer();
        autoTimer = setInterval(() => {
          if (!autoOn || isHolding) return;
          next();
        }, AUTO_MS);
      }

      function stopAutoTimer() {
        if (autoTimer) clearInterval(autoTimer);
        autoTimer = null;
      }

      function attachEvents() {
        // Tap/click to advance (but ignore clicks on controls)
        deckEl.addEventListener("click", (e) => {
          const target = e.target;
          if (target && (target.id === "autoToggle" || target.closest(".topbar"))) return;
          next();
        });

        // Keyboard
        stage.addEventListener("keydown", (e) => {
          if (e.key === "ArrowRight" || e.key === " ") {
            e.preventDefault();
            next();
          }
          if (e.key === "ArrowLeft") {
            e.preventDefault();
            prev();
          }
        });

        // Auto toggle
        autoToggle.addEventListener("click", () => setAuto(!autoOn));

        // Swipe
        let x0 = null;
        let y0 = null;
        let tracking = false;

        deckEl.addEventListener("touchstart", (e) => {
          if (!e.touches || e.touches.length !== 1) return;
          tracking = true;
          x0 = e.touches[0].clientX;
          y0 = e.touches[0].clientY;

          if (autoOn) {
            holdTimer = setTimeout(() => {
              isHolding = true;
            }, HOLD_PAUSE_MS);
          }
        }, { passive: true });

        deckEl.addEventListener("touchmove", (e) => {
          if (!tracking || !e.touches || e.touches.length !== 1) return;
          const x1 = e.touches[0].clientX;
          const y1 = e.touches[0].clientY;
          const dx = x1 - x0;
          const dy = y1 - y0;

          if (holdTimer && (Math.abs(dx) > 12 || Math.abs(dy) > 12)) {
            clearTimeout(holdTimer);
            holdTimer = null;
          }
        }, { passive: true });

        deckEl.addEventListener("touchend", (e) => {
          if (!tracking) return;
          tracking = false;

          if (holdTimer) {
            clearTimeout(holdTimer);
            holdTimer = null;
          }

          if (isHolding) {
            isHolding = false;
            if (autoOn) render();
            return;
          }

          const changed = e.changedTouches && e.changedTouches[0];
          if (!changed) {
            next();
            return;
          }
          const x1 = changed.clientX;
          const y1 = changed.clientY;
          const dx = x1 - x0;
          const dy = y1 - y0;

          if (Math.abs(dx) > 45 && Math.abs(dx) > Math.abs(dy) * 1.2) {
            if (dx < 0) next();
            else prev();
          } else {
            next();
          }
        }, { passive: true });
      }

      // Boot
      build();
    </script>
  </body>
</html>
